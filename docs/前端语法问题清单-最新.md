# 前端语法问题清单

> 生成时间：2024年12月
> 
> 检查工具：手动代码审查 + 模式匹配
> 
> **⚠️ 当前状态**：发现多个编码乱码和语法问题

## 错误统计

- **编码乱码问题**：⚠️ **至少 10+ 个文件存在乱码字符**
- **字符串末尾截断**：⚠️ **多处中文字符被截断**
- **注释乱码**：⚠️ **HTML 注释中存在乱码**
- **TypeScript 错误**：✅ 根据历史记录，大部分已修复

## 一、编码乱码问题（高优先级）

### 1. `src/views/test-execution/UIScriptRepair.vue`

#### 问题 1：按钮文本乱码
- **行号**：199
- **错误代码**：
```vue
分析并修?
```
- **正确代码**：
```vue
分析并修复
```
- **问题类型**：字符串末尾字符截断

#### 问题 2：按钮文本乱码
- **行号**：205
- **错误代码**：
```vue
仅分析错?检索内容方式
```
- **正确代码**：
```vue
仅分析错误
```
- **问题类型**：字符串末尾字符截断

#### 问题 3：placeholder 乱码
- **行号**：105
- **错误代码**：
```vue
placeholder="请粘贴执行过程中的错误日志"
```
- **正确代码**：
```vue
placeholder="请粘贴执行过程中的错误日志"
```
- **问题类型**：字符串末尾字符截断

#### 问题 4：placeholder 乱码
- **行号**：141
- **错误代码**：
```vue
placeholder="可选：提供新值的页面代码URL，用于检测页面变更"
```
- **正确代码**：
```vue
placeholder="可选：提供新值的页面代码URL，用于检测页面变更"
```
- **问题类型**：字符串末尾字符截断

#### 问题 5：表格列标题乱码
- **行号**：367, 369
- **错误代码**：
```vue
<el-table-column prop="oldValue" label="原" show-overflow-tooltip />
<el-table-column prop="newValue" label="新值" show-overflow-tooltip />
```
- **正确代码**：
```vue
<el-table-column prop="oldValue" label="原值" show-overflow-tooltip />
<el-table-column prop="newValue" label="新值" show-overflow-tooltip />
```
- **问题类型**：字符串末尾字符截断

#### 问题 6：代码注释乱码
- **行号**：417
- **错误代码**：
```typescript
// 响应式数据?
```
- **正确代码**：
```typescript
// 响应式数据
```
- **问题类型**：注释中字符截断

#### 问题 7：代码注释乱码
- **行号**：649, 663, 675
- **错误代码**：
```typescript
// 先分析错?
// 如果有新值页面代码URL，检测页面变?
// 执行人中修复
```
- **正确代码**：
```typescript
// 先分析错误
// 如果有新值页面代码URL，检测页面变更
// 执行智能修复
```
- **问题类型**：注释中字符截断

### 2. `src/views/test-execution/UIScriptGeneration.vue`

#### 问题 1：文本内容乱码
- **行号**：403
- **错误代码**：
```vue
{{ generationResult.taskStatus === 'PENDING' ? '任务已提交，等待处理中...' : '正在生成脚本，请稍?..' }}
```
- **正确代码**：
```vue
{{ generationResult.taskStatus === 'PENDING' ? '任务已提交，等待处理中...' : '正在生成脚本，请稍候...' }}
```
- **问题类型**：字符串末尾字符截断

### 3. `src/views/data-document/DataDocumentGeneration.vue`

#### 问题 1：单选框文本乱码
- **行号**：49
- **错误代码**：
```vue
<el-radio label="requirement">按需?检索内容方式<用例<复用</el-radio>
```
- **正确代码**：
```vue
<el-radio label="requirement">按需求检索内容方式<用例<复用</el-radio>
```
- **问题类型**：字符串中字符被替换成乱码

#### 问题 2：单选框文本乱码
- **行号**：52
- **错误代码**：
```vue
<el-radio label="cases">按用?检索内容方式<用例<复用</el-radio>
```
- **正确代码**：
```vue
<el-radio label="cases">按用例检索内容方式<用例<复用</el-radio>
```
- **问题类型**：字符串中字符被替换成乱码

#### 问题 3：表单项 label 乱码
- **行号**：67, 76
- **错误代码**：
```vue
<el-form-item label="需" prop="requirementId" ...>
<el-select ... placeholder="请选择需" ...>
```
- **正确代码**：
```vue
<el-form-item label="需求" prop="requirementId" ...>
<el-select ... placeholder="请选择需求" ...>
```
- **问题类型**：字符串末尾字符截断

#### 问题 4：placeholder 乱码
- **行号**：235
- **错误代码**：
```vue
placeholder="有效等价类（逗号分隔"
```
- **正确代码**：
```vue
placeholder="有效等价类（逗号分隔）"
```
- **问题类型**：字符串末尾字符截断

#### 问题 5：表格列标题乱码
- **行号**：367
- **错误代码**：
```vue
<el-table-column prop="isValid" label="有效" width="100">
```
- **正确代码**：
```vue
<el-table-column prop="isValid" label="有效性" width="100">
```
- **问题类型**：字符串末尾字符截断

#### 问题 6：统计标签乱码
- **行号**：400, 403
- **错误代码**：
```vue
<el-statistic title="有效用例" :value="equivalenceResult.validCases" />
<el-statistic title="无效用例" :value="equivalenceResult.invalidCases" />
```
- **正确代码**：
```vue
<el-statistic title="有效用例数" :value="equivalenceResult.validCases" />
<el-statistic title="无效用例数" :value="equivalenceResult.invalidCases" />
```
- **问题类型**：字符串末尾字符截断

#### 问题 7：按钮文本乱码
- **行号**：517
- **错误代码**：
```vue
生成正交?
```
- **正确代码**：
```vue
生成正交表
```
- **问题类型**：字符串末尾字符截断

### 4. `src/views/flow-document/FlowDocumentGeneration.vue`

#### 问题 1：HTML 注释乱码
- **行号**：84
- **错误代码**：
```vue
<!-- 场景图结果展?-->
```
- **正确代码**：
```vue
<!-- 场景图结果展示 -->
```
- **问题类型**：注释中字符截断

#### 问题 2：HTML 注释乱码
- **行号**：203
- **错误代码**：
```vue
<!-- 路径图结果展?-->
```
- **正确代码**：
```vue
<!-- 路径图结果展示 -->
```
- **问题类型**：注释中字符截断

### 5. `src/views/prompt-template/PromptTemplateList.vue`

#### 问题 1：HTML 注释乱码
- **行号**：1162
- **错误代码**：
```vue
<!-- 鏌ョ湅璇︽儏瀵硅瘽妗?-->
```
- **正确代码**：
```vue
<!-- 查看详情对话框 -->
```
- **问题类型**：注释完全乱码（可能是 UTF-8 被误读为其他编码）

#### 问题 2：HTML 注释乱码
- **行号**：1486
- **错误代码**：
```vue
<!-- 娴嬭瘯鐢熸垚瀵硅瘽妗?-->
```
- **正确代码**：
```vue
<!-- 测试生成对话框 -->
```
- **问题类型**：注释完全乱码（可能是 UTF-8 被误读为其他编码）

#### 问题 3：字符串中乱码
- **行号**：2710
- **错误代码**：
```typescript
`纭瀹氳佸垹闄ゆā鏉?${row.templateName}"鍚楋紵`,
```
- **正确代码**：
```typescript
`确定要删除模板"${row.templateName}"吗？`,
```
- **问题类型**：字符串完全乱码（可能是 UTF-8 被误读为其他编码）

### 6. `src/views/test-risk-assessment/TestRiskAssessment.vue`

#### 问题 1：页面副标题乱码
- **行号**：16
- **错误代码**：
```vue
<p class="page-subtitle">评估需求ID和执行任务的风险等级及上线可行</p>
```
- **正确代码**：
```vue
<p class="page-subtitle">评估需求ID和执行任务的风险等级及上线可行性</p>
```
- **问题类型**：字符串末尾字符截断

## 二、已知已修复的问题（参考历史记录）

根据 `docs/前端语法错误清单.md` 的记载，以下问题已经修复：

### ✅ TypeScript 文件错误（11 个文件）
- `src/api/caseGeneration.ts` - 未使用的 `ApiResult` 导入
- `src/api/caseReuse.ts` - 未使用的 `ApiResult` 导入
- `src/api/common.ts` - 未使用的 `ApiResult` 导入
- `src/api/fileUpload.ts` - 未使用的 `ApiResult` 导入
- `src/api/knowledgeBase.ts` - 未使用的 `ApiResult` 导入
- `src/api/modelConfig.ts` - 未使用的 `ApiResult` 导入
- `src/api/request.ts` - 未使用的 `AxiosRequestConfig` 导入和可能为 undefined 的调用
- `src/api/requirementAnalysis.ts` - 未使用的 `ApiResult` 导入
- `src/api/testExecution.ts` - 未使用的 `ApiResult` 导入
- `src/api/uiScriptGeneration.ts` - 未使用的导入声明
- `src/api/uiScriptRepair.ts` - 未使用的 `ApiResult` 导入

### ✅ Vue 文件语法错误
- `TestReportTemplateList.vue` - 三元运算符缺少 `?`（行 661）- **已修复**
- `TestReportList.vue` - 三元运算符缺少 `?`（行 742）- **已修复**
- `TestSpecificationList.vue` - 字符串缺少引号（行 1210）- **已修复**
- `UIScriptTemplateList.vue` - 字符串缺少引号（行 1087）- **已修复**

## 三、问题分类总结

### P0 - 高优先级（阻塞性错误）
1. ⚠️ **编码乱码问题** - 影响用户体验和显示效果
   - 多处中文字符被截断或乱码
   - 注释中的乱码影响代码可读性
   - 需要手动修复编码问题

### P1 - 中优先级（警告级别）
1. ✅ **未使用的导入** - 不影响运行，但影响代码质量（大部分已修复）
2. ✅ **三元运算符和字符串引号** - 语法错误（已修复）

## 四、修复建议

### 批量修复步骤

1. **修复编码问题**
   ```bash
   # 检查文件编码格式（应使用 UTF-8）
   # 对于乱码严重的文件（如 PromptTemplateList.vue），需要：
   # 1. 确认文件当前编码
   # 2. 重新输入正确的中文字符
   # 3. 确保保存为 UTF-8 编码
   ```

2. **手动修复字符串乱码**
   - 对于字符截断问题（如 `修?`），手动补全缺失字符（`修复`）
   - 对于完全乱码问题（如 `鏌ョ湅璇︽儏`），需要重新输入正确的中文

3. **修复注释乱码**
   - HTML 注释和代码注释中的乱码同样需要手动修复
   - 确保所有注释使用 UTF-8 编码

### 验证修复

修复后运行以下命令验证：
```bash
cd frontend
npm run lint:check
npm run type-check
```

### 预防措施

1. **配置编辑器**：确保所有文件保存为 UTF-8 编码
2. **版本控制**：在 `.gitattributes` 中指定文件编码
3. **代码审查**：在提交前检查中文字符是否正确显示

## 五、详细问题列表

### 编码乱码问题统计

| 文件路径 | 问题数量 | 严重程度 | 状态 |
|---------|---------|---------|------|
| `UIScriptRepair.vue` | 7+ | 高 | ⚠️ 待修复 |
| `DataDocumentGeneration.vue` | 7+ | 高 | ⚠️ 待修复 |
| `UIScriptGeneration.vue` | 1+ | 中 | ⚠️ 待修复 |
| `FlowDocumentGeneration.vue` | 2+ | 低 | ⚠️ 待修复 |
| `PromptTemplateList.vue` | 3+ | 高 | ⚠️ 待修复 |
| `TestRiskAssessment.vue` | 1+ | 中 | ⚠️ 待修复 |
| 其他文件 | 待检查 | - | ⚠️ 待检查 |

## 六、备注

- 本清单基于手动代码审查和模式匹配生成
- 编码乱码问题需要手动检查和修复，不能通过自动工具修复
- 建议优先修复影响用户界面的字符串乱码（按钮文本、标签、提示信息等）
- 注释乱码虽然不影响功能，但建议一并修复以提升代码可读性

---

**下一步行动**：
1. 优先修复 P0 级别的编码乱码问题
2. 逐个文件检查并修复字符串和注释中的乱码
3. 验证修复后重新运行语法检查

