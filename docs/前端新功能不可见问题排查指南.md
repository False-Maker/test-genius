# 前端新功能不可见问题排查指南

## 问题描述
前端新增的功能和页面在界面上看不到。

## 快速检查清单

### ✅ 1. 检查前端服务是否运行

**Windows PowerShell:**
```powershell
# 检查3000端口是否被占用
netstat -ano | findstr :3000

# 或者检查进程
Get-Process | Where-Object {$_.ProcessName -like "*node*"}
```

**如果服务未运行，启动前端服务：**
```powershell
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

**预期输出：**
```
  VITE v5.0.0  ready in 500 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.x.x:3000/
```

---

### ✅ 2. 检查浏览器访问地址

**正确的访问地址：**
- 开发环境：`http://localhost:3000`
- 如果配置了其他端口，检查 `vite.config.ts` 中的 `server.port` 配置

**检查步骤：**
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签，检查是否有错误信息
3. 查看 Network 标签，检查资源是否正常加载

---

### ✅ 3. 清除浏览器缓存

**方法1：硬刷新**
- Windows: `Ctrl + F5` 或 `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

**方法2：清除缓存**
1. 打开浏览器开发者工具（F12）
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

**方法3：清除所有缓存**
- Chrome: 设置 → 隐私设置和安全性 → 清除浏览数据 → 选择"缓存的图片和文件"
- Edge: 设置 → 隐私、搜索和服务 → 清除浏览数据

---

### ✅ 4. 检查菜单是否被折叠

**问题现象：**
- 左侧菜单栏很窄，只显示图标
- 菜单项名称不显示

**解决方法：**
1. 点击左上角的折叠/展开按钮（三条横线图标）
2. 或者点击左侧边栏的空白区域

**菜单应该显示的分组：**
- 核心功能
- AI 能力
- 规约与设计
- **测试评估** ← 新功能
- **测试执行** ← 新功能
- 设计文档
- 配置与资产

---

### ✅ 5. 检查路由是否正确配置

**验证路由配置：**
打开浏览器控制台（F12），在 Console 中输入：
```javascript
// 检查路由配置
console.log(window.location.pathname)

// 手动导航到新页面
this.$router.push('/test-report')
```

**直接访问新功能页面：**
在浏览器地址栏直接输入：
- `http://localhost:3000/test-report` - 测试报告
- `http://localhost:3000/test-coverage` - 覆盖率分析
- `http://localhost:3000/test-risk-assessment` - 风险评估
- `http://localhost:3000/test-specification` - 测试规约
- `http://localhost:3000/page-element` - 页面元素
- `http://localhost:3000/ui-script-template` - UI脚本模板

如果直接访问可以打开，说明路由正常，问题可能在菜单显示。

---

### ✅ 6. 检查控制台错误

**打开浏览器开发者工具（F12），检查：**

1. **Console 标签：**
   - 查看是否有红色错误信息
   - 常见错误：
     - `Failed to load module` - 模块加载失败
     - `Cannot find module` - 找不到模块
     - `Unexpected token` - 语法错误

2. **Network 标签：**
   - 查看是否有请求失败（红色）
   - 检查 `.vue` 文件是否正常加载

3. **Sources 标签：**
   - 检查文件是否正确加载

---

### ✅ 7. 检查页面文件是否存在

**验证关键文件：**
```powershell
# 在项目根目录执行
Test-Path "frontend/src/views/test-report/TestReportList.vue"
Test-Path "frontend/src/views/test-coverage/TestCoverageAnalysis.vue"
Test-Path "frontend/src/views/test-risk-assessment/TestRiskAssessment.vue"
Test-Path "frontend/src/views/test-specification/TestSpecificationList.vue"
Test-Path "frontend/src/views/page-element/PageElementList.vue"
```

**所有文件应该返回 `True`**

---

### ✅ 8. 重启前端服务

**如果以上都正常，尝试重启前端服务：**

1. **停止当前服务：**
   - 在运行 `npm run dev` 的终端按 `Ctrl + C`

2. **清除缓存并重新启动：**
   ```powershell
   cd frontend
   # 清除 node_modules/.vite 缓存
   Remove-Item -Recurse -Force node_modules\.vite -ErrorAction SilentlyContinue
   # 重新启动
   npm run dev
   ```

---

### ✅ 9. 检查菜单配置

**验证菜单配置是否正确：**

打开 `frontend/src/App.vue`，检查是否包含以下菜单项：

```vue
<div class="menu-group-title">测试评估</div>
<el-menu-item index="/test-report">
  <el-icon><DataAnalysis /></el-icon>
  <span>测试报告</span>
</el-menu-item>
<el-menu-item index="/test-report-template">
  <el-icon><Files /></el-icon>
  <span>报告模板</span>
</el-menu-item>
<el-menu-item index="/test-coverage">
  <el-icon><Odometer /></el-icon>
  <span>覆盖率分析</span>
</el-menu-item>
<el-menu-item index="/test-risk-assessment">
  <el-icon><Warning /></el-icon>
  <span>风险评估</span>
</el-menu-item>
<el-menu-item index="/test-case-quality">
  <el-icon><Medal /></el-icon>
  <span>质量评估</span>
</el-menu-item>

<div class="menu-group-title">测试执行</div>
<el-menu-item index="/page-element">
  <el-icon><Pointer /></el-icon>
  <span>页面元素</span>
</el-menu-item>
<el-menu-item index="/ui-script-template">
  <el-icon><DocumentCopy /></el-icon>
  <span>脚本模板</span>
</el-menu-item>
```

---

### ✅ 10. 检查图标导入

**验证图标是否正确导入：**

打开 `frontend/src/App.vue`，检查 script 部分是否包含所有需要的图标：

```typescript
import { 
  Document, List, MagicStick, CopyDocument, Reading, 
  ChatDotRound, Setting, ArrowDown, Edit, Tools, 
  VideoPlay, Share, Grid, Expand, Fold, 
  DataAnalysis, Files, Odometer, Warning, Notebook, 
  Check, Medal, Pointer, DocumentCopy 
} from '@element-plus/icons-vue'
```

---

## 常见问题解决方案

### 问题1：菜单显示但不完整

**症状：** 只看到部分菜单项，新功能菜单不显示

**可能原因：**
- 菜单被 CSS 样式隐藏
- 浏览器窗口太小，菜单被折叠

**解决方法：**
1. 调整浏览器窗口大小
2. 检查浏览器缩放比例（应该是100%）
3. 检查 CSS 样式是否有 `display: none` 或 `visibility: hidden`

---

### 问题2：点击菜单项无反应

**症状：** 点击菜单项，页面不跳转

**可能原因：**
- 路由配置错误
- 页面组件有错误

**解决方法：**
1. 检查浏览器控制台错误
2. 直接访问路由路径（见步骤5）
3. 检查路由配置是否正确

---

### 问题3：页面显示空白

**症状：** 点击菜单后，页面内容区域显示空白

**可能原因：**
- 页面组件有语法错误
- API 调用失败
- 数据加载失败

**解决方法：**
1. 检查浏览器控制台错误
2. 检查 Network 标签，查看 API 请求是否成功
3. 检查页面组件的 `mounted` 或 `created` 钩子是否有错误

---

### 问题4：菜单项显示但图标缺失

**症状：** 菜单项显示，但图标显示为方块或空白

**可能原因：**
- 图标组件未正确导入
- Element Plus 图标库未加载

**解决方法：**
1. 检查 `main.ts` 中是否正确注册了图标
2. 检查 `App.vue` 中是否正确导入了图标组件
3. 重新安装依赖：`npm install @element-plus/icons-vue`

---

## 完整重启流程

如果以上方法都不行，执行完整重启：

```powershell
# 1. 停止所有 Node 进程
Get-Process node | Stop-Process -Force

# 2. 进入前端目录
cd frontend

# 3. 清除缓存
Remove-Item -Recurse -Force node_modules\.vite -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force dist -ErrorAction SilentlyContinue

# 4. 重新安装依赖（可选，如果怀疑依赖问题）
# npm install

# 5. 重新启动
npm run dev
```

---

## 验证新功能是否正常

**测试清单：**

1. ✅ **测试报告管理**
   - 访问：`http://localhost:3000/test-report`
   - 应该看到：报告列表、新建报告按钮

2. ✅ **测试覆盖分析**
   - 访问：`http://localhost:3000/test-coverage`
   - 应该看到：分析列表、新建分析按钮

3. ✅ **风险评估**
   - 访问：`http://localhost:3000/test-risk-assessment`
   - 应该看到：评估列表、执行评估按钮

4. ✅ **测试规约管理**
   - 访问：`http://localhost:3000/test-specification`
   - 应该看到：规约列表、新建规约按钮

5. ✅ **页面元素管理**
   - 访问：`http://localhost:3000/page-element`
   - 应该看到：元素列表、新建元素按钮

---

## 如果仍然无法解决

**请提供以下信息：**

1. 浏览器控制台的完整错误信息（截图或复制文本）
2. Network 标签中的失败请求（截图）
3. 前端服务的启动日志
4. 浏览器类型和版本
5. 操作系统版本

**联系方式：**
- 查看项目文档：`docs/前端功能完整性检查报告.md`
- 检查代码仓库：确认所有文件已提交

---

## 快速验证命令

**一键检查脚本（PowerShell）：**
```powershell
# 检查所有新功能页面文件
$pages = @(
    "frontend/src/views/test-report/TestReportList.vue",
    "frontend/src/views/test-coverage/TestCoverageAnalysis.vue",
    "frontend/src/views/test-risk-assessment/TestRiskAssessment.vue",
    "frontend/src/views/test-specification/TestSpecificationList.vue",
    "frontend/src/views/page-element/PageElementList.vue"
)

Write-Host "检查页面文件..." -ForegroundColor Green
foreach ($page in $pages) {
    if (Test-Path $page) {
        Write-Host "✅ $page" -ForegroundColor Green
    } else {
        Write-Host "❌ $page - 文件不存在！" -ForegroundColor Red
    }
}

# 检查路由配置
Write-Host "`n检查路由配置..." -ForegroundColor Green
$routerContent = Get-Content "frontend/src/router/index.ts" -Raw
if ($routerContent -match "test-report") {
    Write-Host "✅ 路由配置包含 test-report" -ForegroundColor Green
} else {
    Write-Host "❌ 路由配置缺少 test-report" -ForegroundColor Red
}

# 检查菜单配置
Write-Host "`n检查菜单配置..." -ForegroundColor Green
$appContent = Get-Content "frontend/src/App.vue" -Raw
if ($appContent -match "测试评估") {
    Write-Host "✅ 菜单配置包含'测试评估'分组" -ForegroundColor Green
} else {
    Write-Host "❌ 菜单配置缺少'测试评估'分组" -ForegroundColor Red
}
```

保存为 `check-frontend.ps1` 并执行：
```powershell
.\check-frontend.ps1
```

